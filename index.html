<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">	
	<title>Dotas Sistemas</title>
	<link rel="stylesheet" type="text/css" href="src/easyui/themes/bootstrap/easyui.css">
	<link rel="stylesheet" type="text/css" href="src/easyui/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="src/style.css">
	<link rel="stylesheet" type="text/css" href="src/icons_new/icons.css">

	<link rel="stylesheet" type="text/css" href="src/desktop.css">
	<link rel="stylesheet" type="text/css" href="src/texteditor.css">	
	

	<script type="text/javascript" src="src/jquery.min.js"></script>
	<script type="text/javascript" src="src/easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="src/jquery.desktop.js"></script>
	<script type="text/javascript" src="src/jquery.portal.js"></script>
	<script type="text/javascript" src="src/datagrid-filter.js"></script>	

	<script type="text/javascript" src="src/easyui/locale/easyui-lang-pt_BR.js"></script>

	<script src="src/ckeditor/ckeditor.js"></script>


	<script type="text/javascript">
		$(function(){

			var modulos = {}
			$.getJSON( "server.php?op=modulos_config", function( data ) {
			  modulos = data;
			}).always(function() {

				$('body').desktop({
								apps: modulos,
								menus: [{
									text: 'Dotas Sistemas',
									handler: function(){
										$('body').desktop('openApp', {
											icon: 'images/win.png',
											name: 'Quem Somos',
											width: 400,
											height: 200,
											onClose: function(){
												alert();
											},
											href: '_about.html'
										})
									}
								},{
									text: 'Atualizar...',
									handler: function(){
										$('body').desktop('openApp', {
											name: 'System Update'
										})
									}
								},{
									text: 'Itens Recentes',
									menus: [{
										text: 'Monitor'
									},{
										text: 'Menu 1',
										menus: [{
											text: 'Menu 2'
										},{
											text: 'Menu 2',
											menus: [{
												text: 'Menu 1'
											},{
												text: 'Menu 2'
											},{
												text: 'Menu 3'
											}]
										}]
									},{
										text: 'E-Mail',
										menus: [{
											text: 'Mail 1'
										},{
											text: 'Mail 2'
										}]
									},{
										text: 'Pre-Visualizar'
									}]
								},{
									text: 'Ajuda',
									iconCls: 'icon-help',
									handler: function(){
										$('body').desktop('openApp', {
											name: 'Ajuda'
										})
									}
								},{
									text: 'Logout',
									iconCls: 'icon-lock',
									handler: function(){
										$.messager.confirm({
											title:'Confirmar',
											msg:'Deseja fazer logout?',
											border: 'thin'
										})
									}
								}],
								buttons: '#buttons'
							})
						});	
			});



		settingsApp = null;
		function settings(){
			if (settingsApp){
				$('body').desktop('openApp', settingsApp);
				return;
			}
			settingsApp = {
				id: 'settings',
				name: 'Configurações',
				width: 600,
				height: 400,
				onBeforeClose: function(){
					settingsApp = null;
				}
			};
			$('body').desktop('openApp', settingsApp);
			var template = '<div>' +
				'<div region="north" style="padding:5px;height:45px;text-align:right"></div>' +
				'<div region="south" style="text-align:right;height:45px;padding:5px"></div>' +
				'<div region="west" title="Fundo" split="true" style="width:200px"><table id="settings-dl"></table></div>' +
				'<div region="center" title="Pré-visualização"><img id="settings-img" style="border:0;width:100%;height:100%"></div>' +
				'</div>';
			var layout = $(template).appendTo('#settings');
			layout.layout({
				fit: true
			});
			var combo = $('<input>').appendTo(layout.layout('panel','north'));
			combo.combobox({
				data: [
					{value:'default',text:'Default',group:'Base'},
					{value:'gray',text:'Gray',group:'Base'},
					{value:'metro',text:'Metro',group:'Base'},
					{value:'material',text:'Material',group:'Base'},
					{value:'material-teal',text:'Material Teal',group:'Base'},
					{value:'bootstrap',text:'bootstrap',group:'Base'},
					{value:'black',text:'Black',group:'Base'},
				],
				width: 300,
				label: 'Tema: ',
				value: 'bootstrap',
				editable:false,
				panelHeight: 'auto',
				onChange: function(theme){
					var link = $('head').find('link:first');
					link.attr('href', 'https://www.jeasyui.com/easyui/themes/'+theme+'/easyui.css');
				}
			});
			$('#settings-dl').datalist({
				fit: true,
				data: [
					{"text":"Desktop","img":"images/bg.jpg"},
					{"text":"Desktop2","img":"images/bg2.jpg"},
					{"text":"Desktop3","img":"images/bg3.jpg"}
				],
				onLoadSuccess:function(){
					$(this).datalist('selectRow', 0);
				},
				onSelect(index,row){
					$('#settings-img').attr('src', row.img)
				}
			});
			$('<a style="margin-right:10px"></a>').appendTo(layout.layout('panel','south')).linkbutton({
				text: 'Salvar',
				width: 80,
				onClick: function(){
					$('body').desktop('setWallpaper', $('#settings-dl').datalist('getSelected').img);
					$('#settings').window('close');
				}
			})
			$('<a></a>').appendTo(layout.layout('panel','south')).linkbutton({
				text: 'Cancelar',
				width: 80,
				onClick: function(){
					$('#settings').window('close');
				}
			})
		}





	</script>
</head>
<body>
	<div id="buttons">
		<a href="javascript:;" class="easyui-linkbutton" outline="true" plain="true" onclick="settings()">CONFIGURAÇÕES</a>
	</div>
	<script type="text/javascript" src="src/scripts.js"></script>	
	<script type="text/javascript" src="src/default.easyui.js"></script>

</body>
</html>